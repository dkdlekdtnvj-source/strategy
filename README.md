# PPP 비시바 알고 - KASIA 통합 맥스가드

이 저장소에는 PPP Vishva Algo 스캘핑 전략을 `KASIA Base Module v3.0`과 결합해 시간/리스크/가드/컨텍스트 레이어를 전면 통합한 Pine Script(`PPP_VishvaAlgo_Enhanced.pine`)가 포함되어 있습니다. 전략은 다음과 같은 특징을 갖습니다.

- **KASIA 모듈 완전 통합**: 세션·요일·KST 필터, 월렛 적립, 드로우다운 축소, 성과 적응 리스크(PAR), 자본/연패/청산가 가드를 PPP 전략에 직접 결합했습니다. 모든 진입은 KASIA 모듈의 `canTrade` 및 컨텍스트 게이트를 통과해야 실행됩니다.
- **PPP 다중 지표 시그널**: UT Bot(ATR 기반) 돌파, StochRSI MTF 바운스/크로스, Heikin-Ashi EMA20 듀얼 타임프레임, BTC 레짐 필터, EWO·Chop·ATR%·거래량·구조 브레이크 필터로 PPP 핵심 진입 조건을 재현했습니다.
- **동적 포지션 사이징**: 모듈의 Risk-Based/Notional 엔진을 활용하여 손절 거리와 계좌 상황에 맞춰 수량을 산출하며, 최소 수량 미만일 경우 진입을 차단합니다.
- **익절·손절 컴바인 엔진**: ATR/Swing 기반 초기 손절과 R-multiple TP1/TP2, 퍼센트 손절·익절, 브레이크이븐 오프셋, ATR/퍼센트 트레일, ROI 타임락(분 단위) 및 UT 반전 청산을 단계적으로 적용합니다.
- **프리셋 튜너 탑재**: 1분/3분/5분 시나리오에 맞춘 프리셋을 제공해 UT Key·ATR 길이·TP/SL·ROI 타임락을 자동으로 재조정하며, "사용자" 모드에서는 기존과 같이 모든 입력을 수동으로 제어할 수 있습니다.
- **HUD & 디버거**: KCAS HUD가 실시간으로 자본, 적립금, PnL, 가드 상태, ATR%, 연패 등을 표기하며, 별도 디버거 테이블이 필터 통과 여부를 한눈에 제공합니다.
- **알림/자동화 준비**: 3Commas 연동용 JSON 알림 포맷을 유지하며, KASIA 모듈과 PPP 조건이 동시에 만족될 때만 알림이 발송됩니다.

## 사용 방법
1. TradingView에 `PPP_VishvaAlgo_Enhanced.pine`을 붙여 넣은 뒤 전략으로 추가합니다.
2. 기본값으로 15분~1시간 스캘핑에 맞춰져 있으며, 초단타 운용 시 UT Key, ATR 기간, StochRSI TF 등을 자산 특성에 맞게 조정하세요.
3. 리스크 모듈은 기본적으로 월렛 적립 및 PAR을 활성화하므로, 실거래 전 계좌 규모와 목표에 맞춰 `baseRiskPct`, `profitReservePct`, `par` 관련 옵션을 반드시 검토하십시오.
4. 세션·요일·KST 필터가 진입을 제한할 수 있으니, 실제 거래 시간대에 맞게 설정을 변경하세요.
5. 전략을 실전에 투입하기 전 충분한 백테스트와 퍼포먼스 검증을 진행하고, 거래소 최소 주문 단위(`minQty`)를 확인하여 슬리피지 및 주문 오류를 방지하십시오.
6. "프리셋 모드"에서 1분/3분/5분 시나리오를 선택하면 핵심 파라미터가 자동으로 재조정되므로, 프리셋을 적용한 뒤에도 필요 시 수동 값과 일치하는지 확인하세요.

## 주의 사항
- 초기 구간(ATR/볼륨 계산에 필요한 히스토리 부족)에서는 진입이 제한될 수 있습니다. 충분한 바 데이터를 확보한 차트에서 테스트하세요.
- 데모용 RSI 진입 로직은 기본적으로 비활성화되어 있으며, 모듈 기능을 검증할 때만 켜두세요.
- KCAS 가드에 의해 거래가 중지되면 HUD에 "중지"로 표시되며, 해당 조건이 해제되기 전까지 신규 진입이 발생하지 않습니다.
- 프리셋 사용 시에도 종목별 변동성에 따라 UT Key·ATR 길이·ROI 타임락을 미세 조정해야 할 수 있으니, 실거래 전 커스텀 백테스트를 권장합니다.
